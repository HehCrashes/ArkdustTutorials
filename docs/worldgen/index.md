---
writers:
  - AW-CRK14
---

# 世界生成学

世界生成(`WorldGen`)是游戏在创建世界时，进行的一系列行为，将世界的内容从无到有构建内容的过程。

这通常按照顺序包括几个阶段，对应（仅顺序对应，部分步骤合并）代码中的`ChunkStatus`类的顺序：

1. 基于世界的种子(`Seed`)生成伪随机器，初始化噪音系统(`Noise`)
2. 决定结构位置。在这一阶段，结构(`Structure`)将寻找允许的放置位置，从结构集(`StructureSet`)
   中挑选可用的结构，并确定每个分片(`Piece`)的位置与旋转等信息。这一阶段方块尚未生成，直接由群系源(`BiomeSource`)
   与高度访问器(`LevelHeightAccessor`)提供位置信息。
3. 决定位置群系。使用一组预先配置的噪音(`NoiseRouter`)中的六个参数，通过该维度提供的群系源(`BiomeSource`)，
   以4\*4\*4为一个单元，决定该区域的群系。
4. 生成初始地形。使用`NoiseRouter`中提供的密度函数(`DensityFunction`)，通过该维度提供的区块生成器(`NoiseRouter`)
   来处理密度函数并向世界中填充方块。在原版中，正常世界使用`NoiseBasedChunkGenerator`；超平坦和调试模式则使用专门的生成器。
5. 应用表面规则。表面规则(`SurfaceRule`)用于根据位置，深度与群系等信息，决定某一个位置的方块，例如平原表层是草方块，下面是泥土和岩石之类。
6. 添加地形雕刻。雕刻(`Carver`)用于对已完成基本填充的世界进行二次处理，例如雕刻洞穴与雕刻峡谷等。
7. 生成地表特征。特征(`Feature`)包括诸如花，草，树，糊等；这一阶段又可以继续细分。
   值得注意的是，即便结构在上述阶段已经决定了位置，其内部方块的放置以及数据模式结构方块的处理仍是在这一阶段完成的。
8. 至此，所有世界方块全部完成放置。接下来游戏将处理光源，计算光照，并生成生物。

对于详细的信息，您可以查看[minecraft wiki](https://zh.minecraft.wiki/w/%E4%B8%96%E7%95%8C%E7%94%9F%E6%88%90?variant=zh-cn)
获取更多详细的信息。在本章节中，我们也将会继续深入为大家介绍如何自定义其中的关键内容。